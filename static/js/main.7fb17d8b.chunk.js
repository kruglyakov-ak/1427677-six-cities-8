(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{52:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var r,c,s,n,i,o,l,d,u=a(1),j=a.n(u),m=a(18),b=a.n(m),p=a(5),h=a(16);!function(e){e.MarkerDefault="img/pin.svg",e.MarkerCurrent="img/pin-active.svg"}(c||(c={})),function(e){e.Main="/",e.Login="/login",e.Favorites="/favorites",e.Offer="/offer/:id"}(s||(s={})),function(e){e.Hotels="/hotels",e.Login="/login",e.Logout="/logout",e.Comments="/comments",e.Favorite="/favorite"}(n||(n={})),function(e){e.Auth="AUTH",e.NoAuth="NO_AUTH",e.Unknown="UNKNOWN"}(i||(i={})),function(e){e.Apartment="apartment",e.Room="room",e.House="house",e.Hotel="hotel"}(o||(o={})),function(e){e.Popular="Popular",e.LowToHighPrice="Price: low to high",e.HighToLowPrice="Price: high to low",e.TopRated="Top rated first"}(l||(l={})),function(e){e.Paris="Paris",e.Cologne="Cologne",e.Brussels="Brussels",e.Amsterdam="Amsterdam",e.Hamburg="Hamburg",e.Dusseldorf="Dusseldorf"}(d||(d={}));var _,f=(r={},Object(h.a)(r,o.Apartment,"Apartment"),Object(h.a)(r,o.Room,"Private Room"),Object(h.a)(r,o.House,"House"),Object(h.a)(r,o.Hotel,"Hotel"),r),O=a(2),v=a(11),x=a(6);!function(e){e.ChangeCity="offer/changeCity",e.ChangeSortType="offer/changeSortType",e.RequireAuthorization="user/requireAuthorization",e.RequireLogout="user/requireLogout",e.GetCurrentLogin="user/getCurrentLogin",e.LoadOffers="data/loadOffers",e.LoadOfferById="data/loadOfferById",e.RedirectToRoute="offer/redirectToRoute",e.LoadNearbyOffers="data/loadNearbyOffers",e.LoadComments="data/loadComments",e.LoadFavoriteOffers="data/loadFavoriteOffers",e.ChangeOferFavoriteStatus="data/changeOferFavoriteStatus"}(_||(_={}));var g,N,y=Object(x.b)(_.ChangeCity,(function(e){return{payload:e}})),w=Object(x.b)(_.ChangeSortType,(function(e){return{payload:e}})),k=Object(x.b)(_.LoadOffers,(function(e){return{payload:{offers:e}}})),C=Object(x.b)(_.LoadOfferById,(function(e){return{payload:{offer:e}}})),L=Object(x.b)(_.LoadNearbyOffers,(function(e){return{payload:{nearbyOffers:e}}})),T=Object(x.b)(_.LoadComments,(function(e){return{payload:{comments:e}}})),S=Object(x.b)(_.RequireAuthorization,(function(e){return{payload:e}})),M=Object(x.b)(_.RequireLogout),A=Object(x.b)(_.GetCurrentLogin,(function(e){return{payload:e}})),P=Object(x.b)(_.RedirectToRoute,(function(e){return{payload:e}})),F=Object(x.b)(_.LoadFavoriteOffers,(function(e){return{payload:{favoriteOffers:e}}})),R=Object(x.b)(_.ChangeOferFavoriteStatus,(function(e){return{payload:{changedOffer:e}}})),H={authorizationStatus:i.Unknown,currentLogin:""},z=Object(x.c)(H,(function(e){e.addCase(S,(function(e,t){e.authorizationStatus=t.payload})).addCase(M,(function(e){e.authorizationStatus=i.NoAuth})).addCase(A,(function(e,t){e.currentLogin=t.payload}))})),I={currentCity:d.Paris,currentSortType:l.Popular},D=Object(x.c)(I,(function(e){e.addCase(y,(function(e,t){e.currentCity=t.payload})).addCase(w,(function(e,t){e.currentSortType=t.payload}))})),U=Object(x.c)({offers:[],isDataLoaded:!1,offer:null,nearbyOffers:[],comments:[],favoriteOffers:[]},(function(e){e.addCase(k,(function(e,t){var a=t.payload.offers;e.offers=a,e.isDataLoaded=!0})).addCase(C,(function(e,t){var a=t.payload.offer;e.offer=a})).addCase(L,(function(e,t){var a=t.payload.nearbyOffers;e.nearbyOffers=a})).addCase(T,(function(e,t){var a=t.payload.comments;e.comments=a})).addCase(F,(function(e,t){var a=t.payload.favoriteOffers;e.favoriteOffers=a})).addCase(R,(function(e,t){var a=t.payload.changedOffer;e.offers=e.offers.map((function(e){return e.id===a.id?a:e})),e.favoriteOffers=e.favoriteOffers.map((function(e){return e.id===a.id?a:e})),e.offer=a}))}));!function(e){e.Data="DATA",e.Offer="OFFER",e.User="USER"}(N||(N={}));var E=Object(v.c)((g={},Object(h.a)(g,N.Data,U),Object(h.a)(g,N.Offer,D),Object(h.a)(g,N.User,z),g)),G=function(e){return e[N.User].authorizationStatus},q=function(e){return e[N.User].currentLogin},B=a(0);var Y=function(e){var t=e.exact,a=e.path,r=e.render,c=Object(O.c)(G);return Object(B.jsx)(p.b,{exact:t,path:a,render:function(e){return c===i.Auth?r(e):Object(B.jsx)(p.a,{to:s.Login})}})},Z=a(15),W=a(3),J=function(e){return 20*Math.round(e)},K=function(e,t){switch(e){case l.LowToHighPrice:return t.slice().sort((function(e,t){return e.price-t.price}));case l.HighToLowPrice:return t.slice().sort((function(e,t){return t.price-e.price}));case l.TopRated:return t.slice().sort((function(e,t){return t.rating-e.rating}));default:return t}},V=function(e){return{bedrooms:e.bedrooms,cityName:e.city.name,cityLatitude:e.city.location.latitude,cityLongitude:e.city.location.longitude,cityZoom:e.city.location.zoom,latitude:e.location.latitude,longitude:e.location.longitude,zoom:e.location.zoom,description:e.description,goods:e.goods,hostAvatarUrl:e.host.avatar_url,hostId:e.host.id,hostIsPro:e.host.is_pro,hostName:e.host.name,id:e.id,images:e.images,isFavorite:e.is_favorite,isPremium:e.is_premium,maxAdults:e.max_adults,previewImage:e.preview_image,price:e.price,rating:e.rating,title:e.title,type:e.type}},$=function(e){return{comment:e.comment,date:e.date,id:e.id,rating:e.rating,userAvatarUrl:e.user.avatar_url,userId:e.user.id,userIsPro:e.user.is_pro,userName:e.user.name}},Q=a(7),X=a.n(Q),ee=a(14),te="six-citys-token",ae=function(e){localStorage.setItem(te,e)},re=a(20),ce=function(e,t){return function(){var a=Object(ee.a)(X.a.mark((function a(r,c,s){var i,o;return X.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.post("".concat(n.Favorite,"/").concat(e,"/").concat(+t));case 2:i=a.sent,o=i.data,r(R(V(o)));case 5:case"end":return a.stop()}}),a)})));return function(e,t,r){return a.apply(this,arguments)}}()};var se=function(e){var t=e.offer,a=e.onPlaceCardSelect,r=Object(O.b)(),c=Object(O.c)(G),n=t.isPremium,o=t.previewImage,l=t.price,d=t.isFavorite,u=t.rating,j=t.title,m=t.type,b=t.id;return Object(B.jsxs)("article",{className:"cities__place-card place-card",onMouseEnter:function(){a&&a(t)},onMouseLeave:function(){a&&a(null)},children:[n&&Object(B.jsx)("div",{className:"place-card__mark",children:Object(B.jsx)("span",{children:"Premium"})}),Object(B.jsx)("div",{className:"cities__image-wrapper place-card__image-wrapper",children:Object(B.jsx)(W.a,{to:"".concat(s.Main,"offer/").concat(b),children:Object(B.jsx)("img",{className:"place-card__image",src:o,width:"260",height:"200",alt:"Place card"})})}),Object(B.jsxs)("div",{className:"place-card__info",children:[Object(B.jsxs)("div",{className:"place-card__price-wrapper",children:[Object(B.jsxs)("div",{className:"place-card__price",children:[Object(B.jsxs)("b",{className:"place-card__price-value",children:["\u20ac",l]}),Object(B.jsx)("span",{className:"place-card__price-text",children:"/\xa0night"})]}),Object(B.jsxs)("button",{className:d&&c===i.Auth?"place-card__bookmark-button place-card__bookmark-button--active button":"place-card__bookmark-button  button",type:"button",onClick:function(){c===i.NoAuth&&r(P(s.Login)),r(ce(b,!d))},children:[Object(B.jsx)("svg",{className:"place-card__bookmark-icon",width:"18",height:"19",children:Object(B.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(B.jsx)("span",{className:"visually-hidden",children:"To bookmarks"})]})]}),Object(B.jsx)("div",{className:"place-card__rating rating",children:Object(B.jsxs)("div",{className:"place-card__stars rating__stars",children:[Object(B.jsx)("span",{style:{width:"".concat(J(u),"%")}}),Object(B.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(B.jsx)("h2",{className:"place-card__name",children:Object(B.jsx)(W.a,{to:"".concat(s.Main,"offer/").concat(b),children:j})}),Object(B.jsx)("p",{className:"place-card__type",children:m})]})]})};var ne=function(e){var t=e.offers,a=e.handleActiveOfferSelect;return Object(B.jsx)(B.Fragment,{children:t.map((function(e){return Object(B.jsx)(se,{offer:e,onPlaceCardSelect:a},e.id)}))})},ie=a(17);a(51);var oe=function(e,t){var a=Object(u.useState)(null),r=Object(Z.a)(a,2),c=r[0],s=r[1];return Object(u.useEffect)((function(){if(null!==e.current&&null===c&&t){var a=new ie.Map(e.current,{center:{lat:t.cityLatitude,lng:t.cityLongitude},zoom:t.cityZoom}),r=new ie.TileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'});a.addLayer(r),s(a)}}),[e,c,t]),Object(u.useEffect)((function(){t&&(null===c||void 0===c||c.setView({lat:t.cityLatitude,lng:t.cityLongitude}))}),[c,t]),c},le=new ie.Icon({iconUrl:c.MarkerDefault,iconSize:[27,39],iconAnchor:[13.5,39]}),de=new ie.Icon({iconUrl:c.MarkerCurrent,iconSize:[27,39],iconAnchor:[13.5,39]});var ue=function(e){var t=e.activePlaceCard,a=e.offers,r=e.currentOffer,c=Object(u.useRef)(null),s=oe(c,a[0]);return Object(u.useEffect)((function(){var e=[];if(s&&a&&a.forEach((function(a){var r=new ie.Marker({lat:a.latitude,lng:a.longitude});e.push(r),r.setIcon(null!==t&&a.id===t.id?de:le).addTo(s)})),s&&r){var c=new ie.Marker({lat:r.latitude,lng:r.longitude});e.push(c),c.setIcon(de).addTo(s)}return function(){return e.forEach((function(e){return e.remove()}))}}),[s,a,t,r]),Object(B.jsx)("div",{style:{height:"100%"},ref:c,role:"dialog"})},je=function(e){return e[N.Offer].currentCity},me=function(e){return e[N.Offer].currentSortType};var be=function(e){var t=e.city,a=Object(O.c)(je),r=Object(O.b)();return Object(B.jsx)("li",{className:"locations__item",children:Object(B.jsx)(W.a,{className:t===a?"locations__item-link tabs__item--active":"locations__item-link tabs__item",to:s.Main,onClick:function(){r(y(t))},children:Object(B.jsx)("span",{children:t})})})};var pe=function(){return Object(B.jsx)("section",{className:"locations container",children:Object(B.jsx)("ul",{className:"locations__list tabs__list",children:Object.keys(d).map((function(e){return Object(B.jsx)(be,{city:e},e)}))})})};var he=function(){var e=Object(O.c)(G),t=Object(O.c)(q),a=Object(O.b)();return Object(B.jsx)("header",{className:"header",children:Object(B.jsx)("div",{className:"container",children:Object(B.jsxs)("div",{className:"header__wrapper",children:[Object(B.jsx)("div",{className:"header__left",children:Object(B.jsx)(W.a,{className:"header__logo-link header__logo-link--active",to:s.Main,children:Object(B.jsx)("img",{className:"header__logo",src:"img/logo.svg",alt:"6 cities logo",width:"81",height:"41"})})}),Object(B.jsx)("nav",{className:"header__nav",children:Object(B.jsx)("ul",{className:"header__nav-list",children:e===i.Auth?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("li",{className:"header__nav-item user",children:Object(B.jsxs)(W.a,{className:"header__nav-link header__nav-link--profile",to:s.Favorites,children:[Object(B.jsx)("div",{className:"header__avatar-wrapper user__avatar-wrapper"}),Object(B.jsx)("span",{className:"header__user-name user__name",children:t})]})}),Object(B.jsx)("li",{className:"header__nav-item",children:Object(B.jsx)(W.a,{className:"header__nav-link",to:s.Login,children:Object(B.jsx)("span",{className:"header__signout",onClick:function(){a(function(){var e=Object(ee.a)(X.a.mark((function e(t,a,r){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.delete(n.Logout),localStorage.removeItem(te),t(M());case 3:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}())},children:"Sign out"})})})]}):Object(B.jsx)("li",{className:"header__nav-item user",children:Object(B.jsx)(W.a,{className:"header__nav-link",to:s.Login,children:Object(B.jsx)("span",{className:"header__signout",children:"Sign in"})})})})})]})})})};var _e=function(){var e=Object(O.c)(je);return Object(B.jsxs)("div",{className:"page page--gray page--main",children:[Object(B.jsx)(he,{}),Object(B.jsxs)("main",{className:"page__main page__main--index page__main--index-empty",children:[Object(B.jsx)("h1",{className:"visually-hidden",children:"Cities"}),Object(B.jsx)("div",{className:"tabs",children:Object(B.jsx)(pe,{})}),Object(B.jsx)("div",{className:"cities",children:Object(B.jsxs)("div",{className:"cities__places-container cities__places-container--empty container",children:[Object(B.jsx)("section",{className:"cities__no-places",children:Object(B.jsxs)("div",{className:"cities__status-wrapper tabs__content",children:[Object(B.jsx)("b",{className:"cities__status",children:"No places to stay available"}),Object(B.jsxs)("p",{className:"cities__status-description",children:["We could not find any property available at the moment in ",e]})]})}),Object(B.jsx)("div",{className:"cities__right-section"})]})})]})]})};var fe=function(e){var t=e.sortType,a=Object(O.c)(me),r=Object(O.b)();return Object(B.jsx)("li",{className:a===t?"places__option places__option--active":"places__option",tabIndex:0,onClick:function(){r(w(t))},children:t})};var Oe=function(e){var t=e.isSortOptionsOpen;return Object(B.jsx)("ul",{className:t?"places__options places__options--custom places__options--opened":"places__options places__options--custom",children:Object.values(l).map((function(e){return Object(B.jsx)(fe,{sortType:e},e)}))})},ve=function(e){return e[N.Data].offers},xe=function(e){return e[N.Data].offer},ge=function(e){return e[N.Data].nearbyOffers},Ne=function(e){return e[N.Data].comments},ye=function(e){return e[N.Data].favoriteOffers},we=function(e){return e[N.Data].isDataLoaded};var ke=function(){var e=Object(O.c)(je),t=Object(O.c)(ve),a=Object(O.c)(me),r=t.filter((function(t){return t.cityName===e})),c=Object(u.useState)(null),s=Object(Z.a)(c,2),n=s[0],i=s[1],o=Object(u.useState)(!1),l=Object(Z.a)(o,2),d=l[0],j=l[1];return Object(u.useEffect)((function(){return j(!1)}),[a,e]),0===r.length?Object(B.jsx)(_e,{}):Object(B.jsxs)("div",{className:"page page--gray page--main",children:[Object(B.jsx)(he,{}),Object(B.jsxs)("main",{className:"page__main page__main--index",children:[Object(B.jsx)("h1",{className:"visually-hidden",children:"Cities"}),Object(B.jsx)("div",{className:"tabs",children:Object(B.jsx)(pe,{})}),Object(B.jsx)("div",{className:"cities",children:Object(B.jsxs)("div",{className:"cities__places-container container",children:[Object(B.jsxs)("section",{className:"cities__places places",children:[Object(B.jsx)("h2",{className:"visually-hidden",children:"Places"}),Object(B.jsxs)("b",{className:"places__found",children:[r.length," places to stay in ",e]}),Object(B.jsxs)("form",{className:"places__sorting",action:"#",method:"get",children:[Object(B.jsx)("span",{className:"places__sorting-caption",children:"Sort by "}),Object(B.jsxs)("span",{className:"places__sorting-type",tabIndex:0,onClick:function(){j(!d)},children:[a,Object(B.jsx)("svg",{className:"places__sorting-arrow",width:"7",height:"4",children:Object(B.jsx)("use",{xlinkHref:"#icon-arrow-select"})})]}),Object(B.jsx)(Oe,{isSortOptionsOpen:d})]}),Object(B.jsx)("div",{className:"cities__places-list places__list tabs__content",children:Object(B.jsx)(ne,{offers:K(a,r),handleActiveOfferSelect:function(e){i(e)}})})]}),Object(B.jsx)("div",{className:"cities__right-section",children:Object(B.jsx)("section",{className:"cities__map map",children:Object(B.jsx)(ue,{offers:r,activePlaceCard:n})})})]})})]})]})};var Ce=function(){var e=Object(O.b)(),t=Object.keys(d)[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.min(Math.abs(e),Math.abs(t)),c=Math.max(Math.abs(e),Math.abs(t)),s=Math.random()*(c-r)+r;return Number(s.toFixed(a))}(0,Object.keys(d).length-1)],a=Object(u.useRef)(null),r=Object(u.useRef)(null);return Object(B.jsxs)("div",{className:"page page--gray page--login",children:[Object(B.jsx)("header",{className:"header",children:Object(B.jsx)("div",{className:"container",children:Object(B.jsx)("div",{className:"header__wrapper",children:Object(B.jsx)("div",{className:"header__left",children:Object(B.jsx)(W.a,{className:"header__logo-link",to:s.Main,children:Object(B.jsx)("img",{className:"header__logo",src:"img/logo.svg",alt:"6 cities logo",width:"81",height:"41"})})})})})}),Object(B.jsx)("main",{className:"page__main page__main--login",children:Object(B.jsxs)("div",{className:"page__login-container container",children:[Object(B.jsxs)("section",{className:"login",children:[Object(B.jsx)("h1",{className:"login__title",children:"Sign in"}),Object(B.jsxs)("form",{className:"login__form form",action:"#",method:"post",onSubmit:function(t){if(t.preventDefault(),function(){if(null!==a.current&&null!==r.current){var e=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(String(a.current.value).toLowerCase()),t=/[0-9]+[a-z]+|[a-z]+[0-9]+/.test(String(r.current.value).toLowerCase());return e&&t}return!1}()&&null!==a.current&&null!==r.current)return e(A(a.current.value)),void e(function(e){var t=e.login,a=e.password;return function(){var e=Object(ee.a)(X.a.mark((function e(r,c,o){var l,d;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.post(n.Login,{email:t,password:a});case 2:l=e.sent,d=l.data.token,ae(d),r(S(i.Auth)),r(P(s.Main));case 7:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}()}({login:a.current.value,password:r.current.value}));re.b.info("Please enter your email address and password. The password must be at least 1 letter(a-z) and 1 number(0-9).")},children:[Object(B.jsxs)("div",{className:"login__input-wrapper form__input-wrapper",children:[Object(B.jsx)("label",{className:"visually-hidden",children:"E-mail"}),Object(B.jsx)("input",{ref:a,className:"login__input form__input",type:"email",name:"email",placeholder:"Email",required:!0})]}),Object(B.jsxs)("div",{className:"login__input-wrapper form__input-wrapper",children:[Object(B.jsx)("label",{className:"visually-hidden",children:"Password"}),Object(B.jsx)("input",{ref:r,className:"login__input form__input",type:"password",name:"password",placeholder:"Password",required:!0})]}),Object(B.jsx)("button",{className:"login__submit form__submit button",type:"submit",children:"Sign in"})]})]}),Object(B.jsx)("section",{className:"locations locations--login locations--current",children:Object(B.jsx)("div",{className:"locations__item",children:Object(B.jsx)(W.a,{className:"locations__item-link",to:s.Main,onClick:function(){e(y(t))},children:Object(B.jsx)("span",{children:t})})})})]})})]})},Le=a(39);var Te=function(e){var t=e.offer,a=Object(O.b)(),r=t.previewImage,c=t.price,n=t.isFavorite,i=t.isPremium,o=t.rating,l=t.title,d=t.type,u=t.id;return Object(B.jsxs)("article",{className:"favorites__card place-card",children:[i&&Object(B.jsx)("div",{className:"place-card__mark",children:Object(B.jsx)("span",{children:"Premium"})}),Object(B.jsx)("div",{className:"favorites__image-wrapper place-card__image-wrapper",children:Object(B.jsx)(W.a,{to:"".concat(s.Main,"offer/").concat(u),children:Object(B.jsx)("img",{className:"place-card__image",src:r,width:"150",height:"110",alt:"Place card"})})}),Object(B.jsxs)("div",{className:"favorites__card-info place-card__info",children:[Object(B.jsxs)("div",{className:"place-card__price-wrapper",children:[Object(B.jsxs)("div",{className:"place-card__price",children:[Object(B.jsxs)("b",{className:"place-card__price-value",children:["\u20ac",c]}),Object(B.jsx)("span",{className:"place-card__price-text",children:"/\xa0night"})]}),Object(B.jsxs)("button",{className:n?"place-card__bookmark-button place-card__bookmark-button--active button":"place-card__bookmark-button  button",type:"button",onClick:function(){a(ce(u,!n))},children:[Object(B.jsx)("svg",{className:"place-card__bookmark-icon",width:"18",height:"19",children:Object(B.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(B.jsx)("span",{className:"visually-hidden",children:"In bookmarks"})]})]}),Object(B.jsx)("div",{className:"place-card__rating rating",children:Object(B.jsxs)("div",{className:"place-card__stars rating__stars",children:[Object(B.jsx)("span",{style:{width:"".concat(J(o),"%")}}),Object(B.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(B.jsx)("h2",{className:"place-card__name",children:Object(B.jsx)(W.a,{to:"".concat(s.Main,"offer/").concat(u),children:l})}),Object(B.jsx)("p",{className:"place-card__type",children:d})]})]})};var Se=function(e){var t=e.location,a=Object(O.c)(ye),r=Object(O.b)();return Object(B.jsxs)("li",{className:"favorites__locations-items",children:[Object(B.jsx)("div",{className:"favorites__locations locations locations--current",children:Object(B.jsx)("div",{className:"locations__item",children:Object(B.jsx)(W.a,{className:"locations__item-link",to:s.Main,onClick:function(){r(y(t))},children:Object(B.jsx)("span",{children:t})})})}),Object(B.jsx)("div",{className:"favorites__places",children:a.filter((function(e){return e.cityName===t&&e.isFavorite})).map((function(e){return Object(B.jsx)(Te,{offer:e},e.id)}))})]})};var Me=function(){return Object(B.jsxs)("div",{className:"page page--favorites-empty",children:[Object(B.jsx)(he,{}),Object(B.jsx)("main",{className:"page__main page__main--favorites page__main--favorites-empty",children:Object(B.jsx)("div",{className:"page__favorites-container container",children:Object(B.jsxs)("section",{className:"favorites favorites--empty",children:[Object(B.jsx)("h1",{className:"visually-hidden",children:"Favorites (empty)"}),Object(B.jsxs)("div",{className:"favorites__status-wrapper",children:[Object(B.jsx)("b",{className:"favorites__status",children:"Nothing yet saved."}),Object(B.jsx)("p",{className:"favorites__status-description",children:"Save properties to narrow down search or plan your future trips."})]})]})})}),Object(B.jsx)("footer",{className:"footer",children:Object(B.jsx)(W.a,{className:"footer__logo-link",to:s.Main,children:Object(B.jsx)("img",{className:"footer__logo",src:"img/logo.svg",alt:"6 cities logo",width:"64",height:"33"})})})]})};var Ae=function(){var e=Object(O.c)(ye),t=Object(O.b)();Object(u.useEffect)((function(){t(function(){var e=Object(ee.a)(X.a.mark((function e(t,a,r){var c,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.get(n.Favorite);case 2:c=e.sent,s=c.data,t(F(s.map((function(e){return V(e)}))));case 5:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}())}),[t]);var a=new Set;return e.forEach((function(e){e.isFavorite&&a.add(e.cityName)})),0===a.size?Object(B.jsx)(Me,{}):Object(B.jsxs)("div",{className:"page",children:[Object(B.jsx)(he,{}),Object(B.jsx)("main",{className:"page__main page__main--favorites",children:Object(B.jsx)("div",{className:"page__favorites-container container",children:Object(B.jsxs)("section",{className:"favorites",children:[Object(B.jsx)("h1",{className:"favorites__title",children:"Saved listing"}),Object(B.jsx)("ul",{className:"favorites__list",children:Object(Le.a)(a).map((function(e){return Object(B.jsx)(Se,{location:e},e)}))})]})})}),Object(B.jsx)("footer",{className:"footer container",children:Object(B.jsx)(W.a,{className:"footer__logo-link",to:s.Main,children:Object(B.jsx)("img",{className:"footer__logo",src:"img/logo.svg",alt:"6 cities logo",width:"64",height:"33"})})})]})};var Pe=function(){return Object(B.jsxs)("div",{className:"page page--gray page--main",children:[Object(B.jsx)(he,{}),Object(B.jsxs)("main",{className:"page__main page__main--index page__main--index-empty",children:[Object(B.jsx)("h1",{className:"visually-hidden",children:"Cities"}),Object(B.jsx)("div",{className:"cities",children:Object(B.jsxs)("div",{className:"cities__places-container cities__places-container--empty container",children:[Object(B.jsx)("section",{className:"cities__no-places",children:Object(B.jsxs)("div",{className:"cities__status-wrapper tabs__content",children:[Object(B.jsx)("b",{className:"cities__status",children:"Error 404. Page is not found :("}),Object(B.jsx)("p",{className:"cities__status-description",children:Object(B.jsx)(W.a,{className:"cities__status-link",to:s.Main,children:"You can go to the home page."})})]})}),Object(B.jsx)("div",{className:"cities__right-section"})]})})]})]})};a(52);var Fe=function(){return Object(B.jsx)("div",{className:"page page--gray page--main",children:Object(B.jsx)("main",{className:"page__main page__main--index page__main--index-empty",children:Object(B.jsx)("div",{className:"cities",children:Object(B.jsxs)("div",{id:"fountainTextG",children:[Object(B.jsx)("div",{id:"fountainTextG_1",className:"fountainTextG",children:"L"}),Object(B.jsx)("div",{id:"fountainTextG_2",className:"fountainTextG",children:"o"}),Object(B.jsx)("div",{id:"fountainTextG_3",className:"fountainTextG",children:"a"}),Object(B.jsx)("div",{id:"fountainTextG_4",className:"fountainTextG",children:"d"}),Object(B.jsx)("div",{id:"fountainTextG_5",className:"fountainTextG",children:"i"}),Object(B.jsx)("div",{id:"fountainTextG_6",className:"fountainTextG",children:"n"}),Object(B.jsx)("div",{id:"fountainTextG_7",className:"fountainTextG",children:"g"})]})})})})};var Re=function(){var e=Object(O.c)(ge);return Object(B.jsxs)("section",{className:"near-places places",children:[Object(B.jsx)("h2",{className:"near-places__title",children:"Other places in the neighbourhood"}),Object(B.jsx)("div",{className:"near-places__list places__list",children:Object(B.jsx)(ne,{offers:e})})]})};var He=function(){var e=Object(O.c)(ge),t=Object(O.c)(xe);return Object(B.jsx)("section",{className:"property__map map",children:Object(B.jsx)(ue,{offers:e,activePlaceCard:null,currentOffer:t})})},ze=a(37),Ie=a.n(ze);var De=function(e){var t=e.review,a=t.comment,r=t.date,c=t.rating,s=t.userName,n=t.userAvatarUrl,i=t.userIsPro;return Object(B.jsxs)("li",{className:"reviews__item",children:[Object(B.jsxs)("div",{className:"reviews__user user",children:[Object(B.jsx)("div",{className:"reviews__avatar-wrapper user__avatar-wrapper",children:Object(B.jsx)("img",{className:"reviews__avatar user__avatar",src:n,alt:"Reviews avatar",width:"54",height:"54"})}),Object(B.jsx)("span",{className:"reviews__user-name",children:s}),i&&Object(B.jsx)("span",{className:"property__user-status",children:"Pro"})]}),Object(B.jsxs)("div",{className:"reviews__info",children:[Object(B.jsx)("div",{className:"reviews__rating rating",children:Object(B.jsxs)("div",{className:"reviews__stars rating__stars",children:[Object(B.jsx)("span",{style:{width:"".concat(J(c),"%")}}),Object(B.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(B.jsx)("p",{className:"reviews__text",children:a}),Object(B.jsx)("time",{className:"reviews__time",dateTime:"".concat(r),children:Ie()(r).format("MMMM YYYY")})]})]})};var Ue=function(e){var t=e.comments;return Object(B.jsx)(B.Fragment,{children:t.slice().sort((function(e,t){return new Date(t.date).getTime()-new Date(e.date).getTime()})).slice(0,10).map((function(e){return Object(B.jsx)(De,{review:e},e.id)}))})};var Ee=function(e){var t=e.id,a=Object(O.b)(),r=Object(u.useState)(""),c=Object(Z.a)(r,2),s=c[0],i=c[1],o=Object(u.useState)(""),l=Object(Z.a)(o,2),d=l[0],j=l[1],m=Object(u.useState)(!0),b=Object(Z.a)(m,2),p=b[0],h=b[1],_=Object(u.useState)(!1),f=Object(Z.a)(_,2),v=f[0],x=f[1],g=function(e){var t=e.target;i(t.value)};Object(u.useEffect)((function(){d.length>=50&&d.length<=300&&""!==s?h(!1):h(!0)}),[p,d,s]);var N=function(e){return x(e)},y=function(){j(""),i("")};return Object(B.jsxs)("form",{className:"reviews__form form",action:"#",method:"post",onSubmit:function(e){e.preventDefault(),a(function(e,t,a,r){var c=t.comment,s=t.rating;return function(){var t=Object(ee.a)(X.a.mark((function t(i,o,l){var d,u;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.post("".concat(n.Comments,"/").concat(e),{comment:c,rating:s});case 3:return d=t.sent,u=d.data,t.next=7,i(T(u.map((function(e){return $(e)}))));case 7:r(),a(!1),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),re.b.info("".concat(t.t0)),a(!1);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a,r){return t.apply(this,arguments)}}()}(t,{comment:d,rating:s},N,y)),N(!0)},children:[Object(B.jsx)("label",{className:"reviews__label form__label",htmlFor:"review",children:"Your review"}),Object(B.jsxs)("div",{className:"reviews__rating-form form__rating",children:[Object(B.jsx)("input",{className:"form__rating-input visually-hidden",value:"5",id:"5-stars",type:"radio",name:"rating",onChange:g,disabled:v,checked:!!s}),Object(B.jsx)("label",{htmlFor:"5-stars",className:"reviews__rating-label form__rating-label",title:"perfect",children:Object(B.jsx)("svg",{className:"form__star-image",width:"37",height:"33",children:Object(B.jsx)("use",{xlinkHref:"#icon-star"})})}),Object(B.jsx)("input",{className:"form__rating-input visually-hidden",value:"4",id:"4-stars",type:"radio",name:"rating",onChange:g,disabled:v,checked:!!s}),Object(B.jsx)("label",{htmlFor:"4-stars",className:"reviews__rating-label form__rating-label",title:"good",children:Object(B.jsx)("svg",{className:"form__star-image",width:"37",height:"33",children:Object(B.jsx)("use",{xlinkHref:"#icon-star"})})}),Object(B.jsx)("input",{className:"form__rating-input visually-hidden",value:"3",id:"3-stars",type:"radio",name:"rating",onChange:g,disabled:v,checked:!!s}),Object(B.jsx)("label",{htmlFor:"3-stars",className:"reviews__rating-label form__rating-label",title:"not bad",children:Object(B.jsx)("svg",{className:"form__star-image",width:"37",height:"33",children:Object(B.jsx)("use",{xlinkHref:"#icon-star"})})}),Object(B.jsx)("input",{className:"form__rating-input visually-hidden",value:"2",id:"2-stars",type:"radio",name:"rating",onChange:g,disabled:v,checked:!!s}),Object(B.jsx)("label",{htmlFor:"2-stars",className:"reviews__rating-label form__rating-label",title:"badly",children:Object(B.jsx)("svg",{className:"form__star-image",width:"37",height:"33",children:Object(B.jsx)("use",{xlinkHref:"#icon-star"})})}),Object(B.jsx)("input",{className:"form__rating-input visually-hidden",value:"1",id:"1-star",type:"radio",name:"rating",onChange:g,disabled:v,checked:!!s}),Object(B.jsx)("label",{htmlFor:"1-star",className:"reviews__rating-label form__rating-label",title:"terribly",children:Object(B.jsx)("svg",{className:"form__star-image",width:"37",height:"33",children:Object(B.jsx)("use",{xlinkHref:"#icon-star"})})})]}),Object(B.jsx)("textarea",{className:"reviews__textarea form__textarea",id:"review",placeholder:"Tell how was your stay, what you like and what can be improved",name:"review",value:d,onChange:function(e){var t=e.target;j(t.value)},disabled:v}),Object(B.jsxs)("div",{className:"reviews__button-wrapper",children:[Object(B.jsxs)("p",{className:"reviews__help",children:["To submit review please make sure to set ",Object(B.jsx)("span",{className:"reviews__star",children:"rating"})," and describe your stay with at least ",Object(B.jsxs)("b",{className:"reviews__text-amount",children:[50," characters"]}),"."]}),Object(B.jsx)("button",{className:"reviews__submit form__submit button",type:"submit",disabled:p,children:"Submit"})]})]})};var Ge=function(e){var t=e.id,a=Object(O.c)(Ne),r=Object(O.c)(G);return Object(B.jsxs)("section",{className:"property__reviews reviews",children:[Object(B.jsxs)("h2",{className:"reviews__title",children:["Reviews \xb7 ",Object(B.jsx)("span",{className:"reviews__amount",children:a.length})]}),Object(B.jsx)("ul",{className:"reviews__list",children:Object(B.jsx)(Ue,{comments:a})}),r===i.Auth&&Object(B.jsx)(Ee,{id:t})]})};var qe=function(){var e=Object(O.b)(),t=Object(O.c)(xe),a=Object(O.c)(G);if(!t)return Object(B.jsx)(Pe,{});var r=t.images,c=t.isPremium,n=t.bedrooms,o=t.maxAdults,l=t.price,d=t.isFavorite,u=t.rating,j=t.title,m=t.type,b=t.goods,p=t.hostName,h=t.hostIsPro,_=t.description,v=t.id;return Object(B.jsxs)("section",{className:"property",children:[Object(B.jsx)("div",{className:"property__gallery-container container",children:Object(B.jsx)("div",{className:"property__gallery",children:r.slice(0,6).map((function(e){return Object(B.jsx)("div",{className:"property__image-wrapper",children:Object(B.jsx)("img",{className:"property__image",src:"".concat(e),alt:"Room"})},e)}))})}),Object(B.jsx)("div",{className:"property__container container",children:Object(B.jsxs)("div",{className:"property__wrapper",children:[c&&Object(B.jsx)("div",{className:"property__mark",children:Object(B.jsx)("span",{children:"Premium"})}),Object(B.jsxs)("div",{className:"property__name-wrapper",children:[Object(B.jsx)("h1",{className:"property__name",children:j}),Object(B.jsxs)("button",{className:d&&a===i.Auth?"property__bookmark-button property__bookmark-button--active button":"property__bookmark-button  button",type:"button",onClick:function(){a===i.NoAuth&&e(P(s.Login)),e(ce(v,!d))},children:[Object(B.jsx)("svg",{className:"property__bookmark-icon",width:"31",height:"33",children:Object(B.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(B.jsx)("span",{className:"visually-hidden",children:"To bookmarks"})]})]}),Object(B.jsxs)("div",{className:"property__rating rating",children:[Object(B.jsxs)("div",{className:"property__stars rating__stars",children:[Object(B.jsx)("span",{style:{width:"".concat(J(u),"%")}}),Object(B.jsx)("span",{className:"visually-hidden",children:"Rating"})]}),Object(B.jsx)("span",{className:"property__rating-value rating__value",children:u})]}),Object(B.jsxs)("ul",{className:"property__features",children:[Object(B.jsx)("li",{className:"property__feature property__feature--entire",children:f[m]}),Object(B.jsxs)("li",{className:"property__feature property__feature--bedrooms",children:[n," Bedrooms"]}),Object(B.jsxs)("li",{className:"property__feature property__feature--adults",children:["Max ",o," adults"]})]}),Object(B.jsxs)("div",{className:"property__price",children:[Object(B.jsxs)("b",{className:"property__price-value",children:["\u20ac",l]}),Object(B.jsx)("span",{className:"property__price-text",children:"\xa0night"})]}),Object(B.jsxs)("div",{className:"property__inside",children:[Object(B.jsx)("h2",{className:"property__inside-title",children:"What's inside"}),Object(B.jsxs)("ul",{className:"property__inside-list",children:[b.map((function(e){return Object(B.jsx)("li",{className:"property__inside-item",children:e},e)})),";"]})]}),Object(B.jsxs)("div",{className:"property__host",children:[Object(B.jsx)("h2",{className:"property__host-title",children:"Meet the host"}),Object(B.jsxs)("div",{className:"property__host-user user",children:[Object(B.jsx)("div",{className:"property__avatar-wrapper property__avatar-wrapper--pro user__avatar-wrapper",children:Object(B.jsx)("img",{className:"property__avatar user__avatar",src:"img/avatar-angelina.jpg",alt:"Host avatar",width:"74",height:"74"})}),Object(B.jsx)("span",{className:"property__user-name",children:p}),h&&Object(B.jsx)("span",{className:"property__user-status",children:"Pro"})]}),Object(B.jsx)("div",{className:"property__description",children:Object(B.jsx)("p",{className:"property__text",children:_})})]}),Object(B.jsx)(Ge,{id:v})]})}),Object(B.jsx)(He,{})]})};var Be=function(){var e=Object(p.g)().id,t=Object(O.b)();return Object(u.useEffect)((function(){t(function(e){return function(){var t=Object(ee.a)(X.a.mark((function t(a,r,c){var s,i;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.get("".concat(n.Hotels,"/").concat(e));case 2:s=t.sent,i=s.data,a(C(V(i)));case 5:case"end":return t.stop()}}),t)})));return function(e,a,r){return t.apply(this,arguments)}}()}(+e)),t(function(e){return function(){var t=Object(ee.a)(X.a.mark((function t(a,r,c){var s,i;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.get("".concat(n.Hotels,"/").concat(e,"/nearby"));case 2:s=t.sent,i=s.data,a(L(i.map((function(e){return V(e)}))));case 5:case"end":return t.stop()}}),t)})));return function(e,a,r){return t.apply(this,arguments)}}()}(+e)),t(function(e){return function(){var t=Object(ee.a)(X.a.mark((function t(a,r,c){var s,i;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.get("".concat(n.Comments,"/").concat(e));case 2:s=t.sent,i=s.data,a(T(i.map((function(e){return $(e)}))));case 5:case"end":return t.stop()}}),t)})));return function(e,a,r){return t.apply(this,arguments)}}()}(+e))}),[e,t]),Object(B.jsxs)("div",{className:"page",children:[Object(B.jsx)(he,{}),Object(B.jsxs)("main",{className:"page__main page__main--property",children:[Object(B.jsx)(qe,{}),Object(B.jsx)("div",{className:"container",children:Object(B.jsx)(Re,{})})]})]})};var Ye,Ze=function(){var e=Object(O.c)(G),t=Object(O.c)(we);return function(e){return e===i.Unknown}(e)||!t?Object(B.jsx)(Fe,{}):Object(B.jsxs)(p.d,{children:[Object(B.jsx)(p.b,{path:s.Main,exact:!0,children:Object(B.jsx)(ke,{})}),Object(B.jsx)(p.b,{path:s.Login,exact:!0,children:Object(B.jsx)(Ce,{})}),Object(B.jsx)(Y,{exact:!0,path:s.Favorites,render:function(){return Object(B.jsx)(Ae,{})}}),Object(B.jsx)(p.b,{path:s.Offer,exact:!0,children:Object(B.jsx)(Be,{})}),Object(B.jsx)(p.b,{render:function(){return Object(B.jsx)(Pe,{})}})]})},We=a(38),Je=a.n(We);!function(e){e[e.Unauthorized=401]="Unauthorized"}(Ye||(Ye={}));var Ke=a(9),Ve=Object(Ke.a)(),$e=function(e){return function(e){return function(t){return t.type===_.RedirectToRoute&&Ve.push(t.payload),e(t)}}},Qe=(a(71),function(e){var t=Je.a.create({baseURL:"https://8.react.pages.academy/six-cities",timeout:5e3});return t.interceptors.response.use((function(e){return e}),(function(t){var a=t.response;return(null===a||void 0===a?void 0:a.status)===Ye.Unauthorized&&e(),Promise.reject(t)})),t.interceptors.request.use((function(e){var t=function(){var e=localStorage.getItem(te);return null!==e&&void 0!==e?e:""}();return t&&(e.headers["x-token"]=t),e})),t}((function(){return Xe.dispatch(S(i.NoAuth))}))),Xe=Object(x.a)({reducer:E,middleware:function(e){return e({thunk:{extraArgument:Qe}}).concat($e)}});Xe.dispatch(function(){var e=Object(ee.a)(X.a.mark((function e(t,a,r){var c,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.get(n.Login);case 2:c=e.sent,s=c.data.email,t(S(i.Auth)),t(A(s));case 6:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}()),Xe.dispatch(function(){var e=Object(ee.a)(X.a.mark((function e(t,a,r){var c,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.get(n.Hotels);case 2:c=e.sent,s=c.data,t(k(s.map((function(e){return V(e)}))));case 5:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}()),b.a.render(Object(B.jsx)(j.a.StrictMode,{children:Object(B.jsx)(O.a,{store:Xe,children:Object(B.jsxs)(p.c,{history:Ve,children:[Object(B.jsx)(re.a,{}),Object(B.jsx)(Ze,{})]})})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.7fb17d8b.chunk.js.map